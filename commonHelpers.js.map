{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default function createMarkup(images) {\n    return images.map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"main-image\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      height=\"250px\"/>\n  </a>\n  <ul class=\"img-reactions\">\n  \n  <li class=\"reactions\">\n  <h3>Likes</h3>\n  <p>${likes}</p>\n  </li>\n\n   <li class=\"reactions\">\n  <h3>Views</h3>\n  <p>${views}</p>\n  </li>\n\n   <li class=\"reactions\">\n  <h3>Comments</h3>\n  <p>${comments}</p>\n  </li>\n\n   <li class=\"reactions\">\n  <h3>Downloads</h3>\n  <p>${downloads}</p>\n  </li>\n\n  </ul>\n</li>`).join(\"\");\n}\n\n","\nexport default async function getImages(inputValue, amount, quantity) {\n    const KEY = '42523874-92f67aed3babfb2c9b36364a5';\n    const basicURL = 'https://pixabay.com/api/';\n\n    const query = inputValue.trim();\n    const imageType = 'photo';\n    const orientationImage = 'horizontal';\n    const safesearch = 'true';\n    // const page = '1';\n    // const per_page = '15';\n\n    const response = await fetch(`${basicURL}?key=${KEY}&q=${query}&image_type=${imageType}&orientation=${orientationImage}&safesearch=${safesearch}&page=${amount}&per_page=${quantity}`);\n\n    if (!response.ok) {\n        throw new Error(response.status);\n    }\n    return response.json()\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport createMarkup from \"./js/render-functions\";\nimport getImages from \"./js/pixabay-api\";\n\nconst list = document.querySelector(\".gallery\");\nconst input = document.querySelector(\".input-img\");\nconst form = document.querySelector(\".form\");\nconst btn = document.querySelector(\".btn-sub\");\nconst loading = document.querySelector(\".loading\");\nconst btnLoadMore = document.querySelector('[data-action=\"load-more\"]');\nconst spinner = document.querySelector(\".spinner\");\n\nlet current_page = 1;\nlet current_query;\n\nloading.style.display = 'none';\n btnLoadMore.style.display = 'none';\n\nfunction loadImg(event) {\n    event.preventDefault();\n    list.innerHTML = null;\n\n    const inputValue = input.value.trim();\n    if (!inputValue) {\n        return warningNotification();\n    }\n\n    loading.style.display = 'inline-block';\n    btnLoadMore.style.display = 'inline-block';\n\n    getImages(inputValue, 1, 15)\n        .then(data => {\n            const totalHits = data.totalHits || 0;\n            const currentHits = current_page * 15;\n            if (currentHits > totalHits) {\n                btnLoadMore.classList.add('is-hidden')\n            \n                return information();\n            }\n\n            current_query = inputValue;\n    const images = data.hits;\n    if (!images.length) {\n    list.innerHTML = '';\n    return errorNotification();\n    } else {\n    list.innerHTML = createMarkup(images);\n    const lightbox = new SimpleLightbox('.gallery a.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 300,\n    });\n    lightbox.refresh();\n    }\n\n})\n.catch(error => console.log(error))\n.finally(() => {\nloading.style.display = 'none';\n});\ninput.value = '';\n}\n\n\nform.addEventListener('submit', loadImg);\n\n\nbtnLoadMore.addEventListener('click', event => {\n    spinner.classList.remove('is-hidden');\n    current_page++;\n    getImages(current_query, current_page, 15)\n        .then(data => {\n        const images = data.hits;\n        list.innerHTML = createMarkup(images);\n    const lightbox = new SimpleLightbox('.gallery a.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 300,\n    });\n            lightbox.refresh();\n            spinner.scrollIntoView;\n            spinner.classList.add('is-hidden')\n        })\n    .catch(e => alert(e.message))\n\n});\n\nfunction errorNotification(){\n    iziToast.error({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        title: \"Error\",\n        titleColor: \"#fff\",\n        backgroundColor: \"rgba(239, 64, 64, 1)\",\n        messageColor: \"#fff\",\n        position: \"topRight\",\n    });\n}\nfunction warningNotification(){\n   iziToast.warning({\n       title: 'Увага!',\n       position: \"topRight\",\n       backgroundColor: \"orange\",\n       message: 'Поле пошуку не може бути порожнім!',\n   });\n}\n\nfunction information() {\n    iziToast.info({\n       title: 'Info',\n       position: \"topCenter\",\n       backgroundColor: \"blue\",\n       message: 'Упс! Більше немає зображень...',\n   });\n}"],"names":["createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getImages","inputValue","amount","quantity","KEY","basicURL","query","response","list","input","form","loading","btnLoadMore","spinner","current_page","current_query","loadImg","event","warningNotification","data","totalHits","information","SimpleLightbox","errorNotification","error","e","iziToast"],"mappings":"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"}